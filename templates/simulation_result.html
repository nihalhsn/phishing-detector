<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Training Simulation</title>
    <style>
        :root { --bg: #030712; --card: #1f2937; --text: #f3f4f6; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); padding: 2rem; }
        .container { max-width: 900px; margin: 0 auto; }
        
        .header { text-align: center; margin-bottom: 3rem; }
        .header h1 { font-size: 2.5rem; background: linear-gradient(to right, #6366f1, #a855f7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0; }
        
        .email-container {
            background: #111827; border: 1px solid #374151; border-radius: 12px;
            margin-bottom: 2rem; overflow: hidden;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
        }
        
        .email-head { background: #1f2937; padding: 1.5rem; border-bottom: 1px solid #374151; display: flex; justify-content: space-between; align-items: center; }
        .sender-info div { margin-bottom: 0.3rem; }
        .sender-avatar { width: 40px; height: 40px; background: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #9ca3af; margin-right: 15px; }
        
        .email-body { padding: 2rem; font-family: 'Segoe UI', sans-serif; line-height: 1.6; color: #d1d5db; }
        .email-body a { color: #60a5fa; text-decoration: underline; cursor: not-allowed; }

        .decision-bar {
            background: #0f172a; padding: 1rem 2rem;
            display: flex; gap: 2rem; align-items: center; border-top: 1px solid #374151;
        }
        
        .radio-label {
            display: flex; align-items: center; gap: 10px; cursor: pointer;
            padding: 10px 20px; border-radius: 8px; border: 1px solid #374151; transition: 0.2s;
        }
        .radio-label:hover { background: #1f2937; border-color: #6366f1; }
        input[type="radio"] { accent-color: #6366f1; transform: scale(1.2); }

        .submit-btn {
            display: block; width: 200px; margin: 3rem auto; padding: 1rem;
            background: #6366f1; color: white; border: none; border-radius: 8px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer;
        }
        .submit-btn:hover { background: #4f46e5; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Phishing Simulation</h1>
            <p>Identify the threats. Trust nothing.</p>
        </div>

        <form action="/simulation" method="POST">
            {% for email in emails %}
            <div class="email-container">
                <div class="email-head">
                    <div style="display:flex; align-items:center;">
                        <div class="sender-avatar">{{ email.sender[0]|upper }}</div>
                        <div class="sender-info">
                            <div style="font-weight:bold; font-size:1.1rem;">{{ email.subject }}</div>
                            <div style="color:#9ca3af; font-family:monospace;">{{ email.sender }}</div>
                        </div>
                    </div>
                </div>
                <div class="email-body">
                    {{ email.body|safe }}
                </div>
                <div class="decision-bar">
                    <strong>Verdict:</strong>
                    <label class="radio-label">
                        <input type="radio" name="q{{ email.id }}" value="Phishing" required> ðŸš¨ Phishing
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="q{{ email.id }}" value="Safe"> âœ… Legitimate
                    </label>
                </div>
            </div>
            {% endfor %}
            <button type="submit" class="submit-btn">Submit Analysis</button>
        </form>
    </div>
</body>
</html>